import{S as L,i as T,s as B,ad as I,q as O,c as $,r as y,j as z,k as C,m as w,u as k,ae as D,t as d,d as g,l as F,e as S,a4 as P,n as u,T as q,Q as v,R as E,a1 as R}from"./index.54067895.js";import{S as G,A as N,F as Q}from"./SortFilterBanner.35d62afc.js";import{A as U}from"./AnnouncementListElem.bccc46a9.js";import{H as J}from"./Header.13336190.js";import{e as K}from"./fetchWrapper.9cb28478.js";import{c as M,n as V,s as W,f as X,a as Y}from"./stores.95bcd4bd.js";import"./Button.dfe9aea7.js";import"./MultiselectInput.ff979ba6.js";import"./SelectablePill.21e9201c.js";import"./FaMapMarkedAlt.ca3337cf.js";function j(o,r,a){const c=o.slice();return c[11]=r[a],c}function Z(o){return{c:u,m:u,p:u,i:u,o:u,d:u}}function x(o){let r,a,c=o[0],e=[];for(let t=0;t<c.length;t+=1)e[t]=A(j(o,c,t));const m=t=>g(e[t],1,1,()=>{e[t]=null});return{c(){for(let t=0;t<e.length;t+=1)e[t].c();r=q()},m(t,i){for(let l=0;l<e.length;l+=1)e[l].m(t,i);C(t,r,i),a=!0},p(t,i){if(i&19){c=t[0];let l;for(l=0;l<c.length;l+=1){const f=j(t,c,l);e[l]?(e[l].p(f,i),d(e[l],1)):(e[l]=A(f),e[l].c(),d(e[l],1),e[l].m(r.parentNode,r))}for(v(),l=c.length;l<e.length;l+=1)m(l);E()}},i(t){if(!a){for(let i=0;i<c.length;i+=1)d(e[i]);a=!0}},o(t){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)g(e[i]);a=!1},d(t){R(e,t),t&&F(r)}}}function A(o){let r,a;function c(){return o[9](o[11])}return r=new U({props:{areDetailsShown:o[1]===o[11].id,data:o[11],clickHandler:c}}),{c(){$(r.$$.fragment)},m(e,m){w(r,e,m),a=!0},p(e,m){o=e;const t={};m&3&&(t.areDetailsShown=o[1]===o[11].id),m&1&&(t.data=o[11]),m&1&&(t.clickHandler=c),r.$set(t)},i(e){a||(d(r.$$.fragment,e),a=!0)},o(e){g(r.$$.fragment,e),a=!1},d(e){S(r,e)}}}function ee(o){return{c:u,m:u,p:u,i:u,o:u,d:u}}function te(o){let r,a,c,e,m,t,i,l,f,b,p,_;a=new J({}),e=new G({props:{sortOptions:o[3]}});let n={ctx:o,current:null,token:null,hasCatch:!1,pending:ee,then:x,catch:Z,value:10,blocks:[,,,]};return I(i=o[2],n),f=new N({props:{pageType:"announcements"}}),p=new Q({props:{pageType:"announcements"}}),{c(){r=O("div"),$(a.$$.fragment),c=y(),$(e.$$.fragment),m=y(),t=O("div"),n.block.c(),l=y(),$(f.$$.fragment),b=y(),$(p.$$.fragment),z(t,"class","h-[calc(100%-10rem)] lg:h-[calc(100%-14rem)] overflow-auto"),z(r,"class","h-screen")},m(s,h){C(s,r,h),w(a,r,null),k(r,c),w(e,r,null),k(r,m),k(r,t),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null,k(r,l),w(f,r,null),k(r,b),w(p,r,null),_=!0},p(s,[h]){o=s,n.ctx=o,h&4&&i!==(i=o[2])&&I(i,n)||D(n,o,h)},i(s){_||(d(a.$$.fragment,s),d(e.$$.fragment,s),d(n.block),d(f.$$.fragment,s),d(p.$$.fragment,s),_=!0)},o(s){g(a.$$.fragment,s),g(e.$$.fragment,s);for(let h=0;h<3;h+=1){const H=n.blocks[h];g(H)}g(f.$$.fragment,s),g(p.$$.fragment,s),_=!1},d(s){s&&F(r),S(a),S(e),n.block.d(),n.token=null,n=null,S(f),S(p)}}}function ne(o,r,a){let c,e,m,t;P(o,V,n=>a(5,c=n)),P(o,W,n=>a(6,e=n)),P(o,X,n=>a(7,m=n)),P(o,Y,n=>a(8,t=n));let i=[],l=null,f=[{id:1,name:"Od najnowszych"},{id:2,name:"Od najstarszych"},{id:3,name:"Po liczbie zapisanych rosn\u0105co"},{id:4,name:"Po liczbie zapisanych malej\u0105co"}],b;M();const p=n=>{l!==n?a(1,l=n):a(1,l=null)},_=n=>p(n.id);return o.$$.update=()=>{if(o.$$.dirty&480){let n=new URLSearchParams;for(let s of t)n.append("categoryIds",s);for(let s of m)n.append("locationIds",s);e!==null&&n.append("sortOption",e.toString()),c!==null&&n.append("nameSearch",c),a(2,b=K("announcements?"+n.toString(),"GET").then(s=>s.json()).then(s=>a(0,i=s)))}},[i,l,b,f,p,c,e,m,t,_]}class pe extends L{constructor(r){super(),T(this,r,ne,te,B,{})}}export{pe as default};
